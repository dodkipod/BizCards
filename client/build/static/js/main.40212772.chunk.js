(this["webpackJsonpreal-app"]=this["webpackJsonpreal-app"]||[]).push([[0],{13:function(e){e.exports=JSON.parse('{"a":"http://localhost:8181/api"}')},52:function(e,t,a){},53:function(e,t,a){},81:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a(1),s=a.n(n),c=a(20),i=a.n(c),o=(a(52),a(6)),l=a(7),d=a(9),u=a(8),b=(a(53),a(4)),j=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props.user;return Object(r.jsx)("nav",{className:"navbar navbar-expand-lg shadow-sm navbar-custom ",children:Object(r.jsxs)("div",{className:"container",children:[Object(r.jsx)(b.b,{className:"navbar-brand",to:"/",children:"BizCards"}),Object(r.jsx)("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(r.jsx)("span",{className:"navbar-toggler-icon"})}),Object(r.jsxs)("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent",children:[Object(r.jsxs)("ul",{className:"navbar-nav mr-auto ",children:[Object(r.jsx)("li",{className:"nav-item",children:Object(r.jsx)(b.c,{className:"nav-link",to:"/favorites",children:"Favorites"})}),e&&e.biz&&Object(r.jsx)("li",{className:"nav-item",children:Object(r.jsx)(b.c,{className:"nav-link",to:"/my-cards",children:"My Cards"})})]}),Object(r.jsxs)("ul",{className:"navbar-nav ml-auto",children:[!e&&Object(r.jsxs)(s.a.Fragment,{children:[Object(r.jsx)("li",{className:"nav-item",children:Object(r.jsx)(b.c,{className:"nav-link",to:"/signin",children:"Sign in"})}),Object(r.jsx)("li",{className:"nav-item",children:Object(r.jsx)(b.c,{className:"nav-link",to:"/signup",children:"Sign up"})}),Object(r.jsx)("li",{className:"nav-item",children:Object(r.jsx)(b.c,{className:"nav-link",to:"/biz-signup",children:"Business"})})]}),e&&Object(r.jsx)("li",{className:"nav-item",children:Object(r.jsxs)(b.c,{className:"nav-link main-font",to:"/logout",children:["log out ",e.name]})})]})]})]})})}}]),a}(n.Component),m=function(){return Object(r.jsxs)("p",{className:"border-top pt-2 text-center mt-2 footer mb-0 p-2",children:["BizCards \xa9 ",(new Date).getFullYear()]})},h=a(2),p=a.n(h),v=a(22),f=a(5),O=function(e){var t=e.titleText;return Object(r.jsx)("div",{className:"row",children:Object(r.jsx)("div",{className:"col-12 mt-4",children:Object(r.jsx)("h1",{className:"display-4",children:t})})})},x=a(23),g=a.n(x),N=a(16),w=a(13),y=a(45),C="token";function k(){return(k=Object(f.a)(p.a.mark((function e(t,a){var r,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.post("".concat(w.a,"/auth"),{email:t,password:a});case 2:r=e.sent,n=r.data,localStorage.setItem(C,n.token);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var z={login:function(e,t){return k.apply(this,arguments)},getCurrentUser:function(){try{var e=localStorage.getItem(C);return Object(y.a)(e)}catch(t){return null}},logout:function(){localStorage.removeItem(C)},getJwt:function(){return localStorage.getItem(C)},addFavorite:function(e){return S.patch("".concat(w.a,"/users/favorites"),{cardID:e})},getFavorites:function(){return S.get("".concat(w.a,"/users/favorites"))},deleteFavorite:function(e){return S.delete("".concat(w.a,"/users/favorites"),{data:{cardID:e}})}};g.a.defaults.headers.common["x-auth-token"]=z.getJwt(),g.a.interceptors.response.use(null,(function(e){return e.response&&e.response.status>=403&&Object(N.b)("An unexpected error occurred"),Promise.reject(e)}));var S={get:g.a.get,post:g.a.post,put:g.a.put,patch:g.a.patch,delete:g.a.delete};var I={createCard:function(e){return S.post("".concat(w.a,"/cards"),e)},getMyCards:function(){return S.get("".concat(w.a,"/cards/my-cards"))},editCard:function(e){var t=e._id;return delete e._id,S.put("".concat(w.a,"/cards/").concat(t),e)},getCard:function(e){return S.get("".concat(w.a,"/cards/").concat(e))},deleteCard:function(e){return S.delete("".concat(w.a,"/cards/").concat(e))},getAllCards:function(){return S.get("".concat(w.a,"/cards/"))}},B=function(e){var t=e.card,a=e.clickDel,n=e.parent,c=e.clickFav,i=e.deleteFav,o=e.faved;return Object(r.jsx)("div",{className:"col-md-6 col-lg-4 mt-3",children:Object(r.jsxs)("div",{className:"card",children:[Object(r.jsx)("div",{className:"rounded",children:Object(r.jsx)("div",{children:Object(r.jsx)("img",{width:"100%",src:t.bizImage,alt:t.bizName})})}),Object(r.jsxs)("div",{className:"card-body",children:[Object(r.jsx)("h5",{className:"card-title",children:t.bizName}),Object(r.jsx)("p",{className:"card-text",children:t.bizDescription}),Object(r.jsxs)("p",{className:"card-text border-top pt-2",children:[Object(r.jsx)("b",{children:"tel: "}),t.bizPhone," ",Object(r.jsx)("br",{}),Object(r.jsx)("b",{children:"Address: "}),t.bizAddress," ",Object(r.jsx)("br",{}),Object(r.jsx)("b",{children:"Card Number: "}),t.bizNumber," ",Object(r.jsx)("br",{})]}),"myCards"===n&&Object(r.jsxs)(s.a.Fragment,{children:[Object(r.jsx)(b.b,{className:"text-dark mr-1",to:"/my-cards/edit/".concat(t._id),children:"Edit "}),Object(r.jsx)("span",{className:"text-dark",children:"|"}),Object(r.jsx)("a",{href:"/",className:"ml-1 text-dark",onClick:function(e){return a(t._id,e)},children:"Delete"})]}),"home"===n&&!o&&Object(r.jsx)("a",{href:"/",onClick:function(e){return c(e,t._id)},children:Object(r.jsx)("i",{className:"far fa-heart text-danger heart"})}),"home"===n&&o&&Object(r.jsx)("a",{href:"/",onClick:function(e){return c(e,t._id)},children:Object(r.jsx)("i",{className:"fas fa-heart text-danger heart"})}),"favorites"===n&&Object(r.jsx)("a",{href:"/",onClick:function(e){return i(e,t._id)},className:"btn btn-outline-dark",children:"Remove"})]})]})})},D=a(21),A=a.n(D),P=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={cards:[],favIDs:[]},e.search=function(){var t=Object(f.a)(p.a.mark((function t(a){var r,n,s,c,i,o,l,d;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=a.target.value.trim().toLowerCase(),n=e.allcards,s=[],c=n.filter((function(e){return e.bizName.toLowerCase().includes(r)})),i=n.filter((function(e){return e.bizDescription.toLowerCase().includes(r)})),o=n.filter((function(e){return e.bizAddress.toLowerCase().includes(r)})),l=n.filter((function(e){return e.bizNumber.includes(r)})),c.length>0&&(s=s.concat(c)),i.length>0&&(s=s.concat(i)),l.length>0&&(s=s.concat(l)),o.length>0&&(s=s.concat(o)),d=Object(v.a)(new Set(s)),e.setState({cards:d}),""===r&&e.setState({cards:e.allcards});case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.clickFav=function(){var t=Object(f.a)(p.a.mark((function t(a,r){var n,s;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),n=Object(v.a)(e.state.favIDs),n.find((function(e){return e===r}))){t.next=18;break}return t.prev=4,t.next=7,z.addFavorite(r);case 7:s=t.sent,n.push(r),e.setState({favIDs:n}),N.b.success(s.data,{position:"top-center",autoClose:2500}),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(4),A.a.fire({title:"You are not logged in",text:"Please log in to add cards to your favorites",icon:"warning",showCancelButton:!0,confirmButtonText:"Log in",confirmButtonColor:"#dc3545",cancelButtonText:"Cancel"}).then(function(){var t=Object(f.a)(p.a.mark((function t(a){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a.value&&e.props.history.push("/signIn");case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 16:t.next=19;break;case 18:N.b.error("Card already in your favorites",{position:"top-center",autoClose:2500});case 19:case"end":return t.stop()}}),t,null,[[4,13]])})));return function(e,a){return t.apply(this,arguments)}}(),e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=Object(f.a)(p.a.mark((function e(){var t,a,r,n,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.getAllCards();case 2:return t=e.sent,this.allcards=t.data,a=this.allcards,e.next=7,z.getCurrentUser();case 7:if(!e.sent){e.next=18;break}return e.next=11,z.getFavorites();case 11:return r=e.sent,n=r.data,s=n.map((function(e){return e._id})),e.abrupt("return",this.setState({cards:a,favIDs:s}));case 18:return e.abrupt("return",this.setState({cards:a}));case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"checkFaved",value:function(e){return!!Object(v.a)(this.state.favIDs).find((function(t){return t===e}))}},{key:"render",value:function(){var e=this,t=this.state.cards;return Object(r.jsxs)("div",{className:"container",children:[Object(r.jsx)(O,{titleText:"Home Page"}),Object(r.jsx)("div",{className:"row",children:Object(r.jsxs)("div",{className:"col-12",children:[Object(r.jsx)("h4",{children:"A place for digital business cards."}),Object(r.jsx)("p",{children:"Look at all these cards!"})]})}),Object(r.jsx)("div",{className:"row",children:Object(r.jsx)("div",{className:"col-lg-5",children:Object(r.jsx)("div",{className:"input-group ",children:Object(r.jsx)("input",{className:"form-control ",id:"search",name:"search",type:"search",placeholder:"search",onInput:this.search})})})}),Object(r.jsxs)("div",{className:"row",children:[0===t.length&&Object(r.jsx)("div",{className:"col-12 mt-3",children:Object(r.jsx)("p",{children:"No cards yet"})}),t.length>0&&t.map((function(t){return Object(r.jsx)(B,{faved:e.checkFaved(t._id),card:t,parent:"home",clickFav:e.clickFav},t._id)}))]})]})}}]),a}(n.Component),F=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={favorites:[]},e.deleteFav=function(){var t=Object(f.a)(p.a.mark((function t(a,r){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a.preventDefault(),A.a.fire({title:"Are you sure?",text:"This card will removed from your favorites",icon:"warning",showCancelButton:!0,confirmButtonText:"Remove",confirmButtonColor:"#dc3545",cancelButtonText:"Cancel"}).then(function(){var t=Object(f.a)(p.a.mark((function t(a){var n,s;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a.value){t.next=7;break}return t.next=3,z.deleteFavorite(r);case 3:n=Object(v.a)(e.state.favorites),s=n.filter((function(e){return e._id!==r})),e.setState({favorites:s}),A.a.fire("Card removed from favorites"," ","success");case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 2:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=Object(f.a)(p.a.mark((function e(){var t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.getFavorites();case 2:t=e.sent,(a=t.data).length>0&&this.setState({favorites:a});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.favorites;return Object(r.jsxs)("div",{className:"container",children:[Object(r.jsx)(O,{titleText:"Your favorite cards"}),Object(r.jsx)("div",{className:"row",children:Object(r.jsxs)("div",{className:"col-12",children:[Object(r.jsx)("p",{children:"Your saved cards:"}),Object(r.jsxs)("div",{className:"row",children:[0===t.length&&Object(r.jsx)("p",{children:"No favorites yet"}),t.length>0&&t.map((function(t){return Object(r.jsx)(B,{card:t,parent:"favorites",deleteFav:e.deleteFav},t._id)}))]})]})})]})}}]),a}(n.Component),T=a(12),_=a(3),q=a.n(_),M=a(26),E=a(46),U=a(28),L=function(e){var t=e.name,a=e.label,n=e.error,s=Object(U.a)(e,["name","label","error"]);return Object(r.jsxs)("div",{className:"form-group",children:[Object(r.jsx)("label",{htmlFor:t,children:a}),Object(r.jsx)("input",Object(T.a)(Object(T.a)({},s),{},{name:t,id:t,className:"form-control"})),n&&Object(r.jsx)("span",{className:"text-danger",children:n})]})},J=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={data:{},errors:{}},e.validate=function(){var t=q.a.validate(e.state.data,e.schema,{abortEarly:!1}).error;if(!t)return null;var a,r={},n=Object(E.a)(t.details);try{for(n.s();!(a=n.n()).done;){var s=a.value;r[s.path[0]]=s.message}}catch(c){n.e(c)}finally{n.f()}return r},e.validateProperty=function(t){var a=t.name,r=t.value,n=Object(M.a)({},a,r),s=Object(M.a)({},a,e.schema[a]),c=q.a.validate(n,s).error;return c?c.details[0].message:null},e.handleSubmit=function(t){t.preventDefault();var a=e.validate();e.setState({errors:a||{}}),a||e.doSubmit()},e.handleChange=function(t){var a=t.currentTarget,r=Object(T.a)({},e.state.errors),n=e.validateProperty(a);n?r[a.name]=n:delete r[a.name];var s=Object(T.a)({},e.state.data);s[a.name]=a.value,e.setState({data:s,errors:r})},e}return Object(l.a)(a,[{key:"renderButton",value:function(e){return Object(r.jsx)("button",{disabled:this.validate(),className:this.validate()?"btn btn-primary btn-custom-dis":"btn btn-primary btn-custom",children:e})}},{key:"renderInput",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text",n=this.state,s=n.data,c=n.errors;return Object(r.jsx)(L,{type:a,name:e,value:s[e],label:t,onChange:this.handleChange,error:c[e]})}}]),a}(n.Component),Y=a(10),R=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={data:{email:"",password:"",name:""},errors:{}},e.schema={email:q.a.string().required().email().label("Email"),password:q.a.string().required().min(6).label("Password"),name:q.a.string().required().min(2).label("Name")},e.doSubmit=Object(f.a)(p.a.mark((function t(){var a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(a=Object(T.a)({},e.state.data)).biz=!1,t.prev=2,t.next=5,S.post("".concat(w.a,"/users"),a);case 5:Object(N.b)("Signup successful!"),e.props.history.replace("/signin"),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),t.t0.response&&400===t.t0.response.status&&e.setState({errors:{email:t.t0.response.data}});case 12:case"end":return t.stop()}}),t,null,[[2,9]])}))),e}return Object(l.a)(a,[{key:"render",value:function(){return z.getCurrentUser()?Object(r.jsx)(Y.a,{to:"/"}):Object(r.jsxs)("div",{className:"container",children:[Object(r.jsx)(O,{titleText:"Sign Up Page"}),Object(r.jsx)("div",{className:"row",children:Object(r.jsx)("div",{className:"col-12",children:Object(r.jsx)("p",{children:"Open new account today!"})})}),Object(r.jsx)("div",{className:"row",children:Object(r.jsx)("div",{className:"col-lg-6",children:Object(r.jsxs)("form",{onSubmit:this.handleSubmit,autoComplete:"off",method:"POST",children:[this.renderInput("email","Email","email"),this.renderInput("password","Password","password"),this.renderInput("name","Name"),this.renderButton("Signup")]})})}),Object(r.jsx)("div",{className:"mt-3",children:Object(r.jsx)(b.b,{to:"/signin",className:"link",children:"Already have an account? Sign in here"})})]})}}]),a}(J),V=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={data:{email:"",password:"",name:""},errors:{}},e.schema={email:q.a.string().required().email().label("Email"),password:q.a.string().required().min(6).label("Password"),name:q.a.string().required().min(2).label("Name")},e.doSubmit=Object(f.a)(p.a.mark((function t(){var a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(a=Object(T.a)({},e.state.data)).biz=!0,t.prev=2,t.next=5,S.post("".concat(w.a,"/users"),a);case 5:return t.next=7,z.login(a.email,a.password);case 7:window.location="/create-card",t.next=13;break;case 10:t.prev=10,t.t0=t.catch(2),t.t0.response&&400===t.t0.response.status&&e.setState({errors:{email:t.t0.response.data}});case 13:case"end":return t.stop()}}),t,null,[[2,10]])}))),e}return Object(l.a)(a,[{key:"render",value:function(){return z.getCurrentUser()?Object(r.jsx)(Y.a,{to:"/"}):Object(r.jsxs)("div",{className:"container",children:[Object(r.jsx)(O,{titleText:"Business Registration Form"}),Object(r.jsx)("div",{className:"row",children:Object(r.jsx)("div",{className:"col-12",children:Object(r.jsx)("p",{children:"Open a new business account today!"})})}),Object(r.jsx)("div",{className:"row",children:Object(r.jsx)("div",{className:"col-lg-6",children:Object(r.jsxs)("form",{onSubmit:this.handleSubmit,autoComplete:"off",method:"POST",children:[this.renderInput("email","Email","email"),this.renderInput("password","Password","password"),this.renderInput("name","Name"),this.renderButton("Next")]})})})]})}}]),a}(J),$=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={data:{bizName:"",bizDescription:"",bizAddress:"",bizPhone:"",bizImage:""},errors:{}},e.schema={bizName:q.a.string().min(2).max(255).required(),bizDescription:q.a.string().min(2).max(1024).required(),bizAddress:q.a.string().min(2).max(400).required(),bizPhone:q.a.string().min(9).max(10).required().regex(/^0[2-9]\d{7,8}$/),bizImage:q.a.string().min(11).max(1024).uri().allow("")},e.doSubmit=Object(f.a)(p.a.mark((function t(){var a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(a=Object(T.a)({},e.state.data)).bizImage||delete a.bizImage,t.next=4,I.createCard(a);case 4:N.b.success("Your card has been created!",{position:"top-center",autoClose:2500}),e.props.history.replace("/my-cards");case 6:case"end":return t.stop()}}),t)}))),e}return Object(l.a)(a,[{key:"render",value:function(){return Object(r.jsxs)("div",{className:"container",children:[Object(r.jsx)(O,{titleText:"Card Creation Form"}),Object(r.jsx)("div",{className:"row",children:Object(r.jsx)("div",{className:"col-12",children:Object(r.jsx)("p",{children:"Please fill in your business card details"})})}),Object(r.jsx)("div",{className:"row",children:Object(r.jsx)("div",{className:"col-lg-6",children:Object(r.jsxs)("form",{onSubmit:this.handleSubmit,autoComplete:"off",method:"POST",children:[this.renderInput("bizName","Business name"),this.renderInput("bizDescription","Business description"),this.renderInput("bizAddress","Business address"),this.renderInput("bizPhone","Business phone number"),this.renderInput("bizImage","Business image"),this.renderButton("Create Card"),Object(r.jsx)(b.b,{className:"btn btn-primary ml-2 btn-custom",to:"/my-cards",children:"Cancel"})]})})})]})}}]),a}(J),H=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={cards:[]},e.filterCards=function(t){return Object(v.a)(e.state.cards).filter((function(e){return e._id!==t}))},e.deleteCard=function(t,a){a.preventDefault(),A.a.fire({title:"Are you sure?",text:"This card will be lost forever",icon:"warning",showCancelButton:!0,confirmButtonText:"Delete card",confirmButtonColor:"#dc3545",cancelButtonText:"Cancel"}).then(function(){var a=Object(f.a)(p.a.mark((function a(r){return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!r.value){a.next=5;break}return e.setState({cards:e.filterCards(t)}),a.next=4,I.deleteCard(t);case 4:A.a.fire("Card deleted!"," ","success");case 5:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}())},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=Object(f.a)(p.a.mark((function e(){var t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.getMyCards();case 2:t=e.sent,(a=t.data).length>0&&this.setState({cards:a});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.cards;return Object(r.jsxs)("div",{className:"container",children:[Object(r.jsx)(O,{titleText:"Your Cards"}),Object(r.jsx)("div",{className:"row",children:Object(r.jsx)("div",{className:"col-12",children:Object(r.jsx)("p",{children:Object(r.jsxs)(b.b,{className:"btn btn-outline-secondary btn-custom",to:"/create-card",children:[Object(r.jsx)("i",{className:"fas fa-plus-circle"})," Add card"]})})})}),Object(r.jsx)("div",{className:"row",children:Object(r.jsx)("div",{className:"col-12",children:Object(r.jsx)("p",{children:"Below are your cards:"})})}),Object(r.jsxs)("div",{className:"row",children:[0===t.length&&Object(r.jsx)("div",{className:"col-12 mt-3",children:Object(r.jsx)("p",{children:"No cards yet"})}),t.length>0&&t.map((function(t){return Object(r.jsx)(B,{card:t,clickDel:e.deleteCard,parent:"myCards"},t._id)}))]})]})}}]),a}(n.Component),G=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={data:{bizName:"",bizDescription:"",bizAddress:"",bizPhone:"",bizImage:""},errors:{}},e.schema={_id:q.a.string(),bizName:q.a.string().min(2).max(255).required(),bizDescription:q.a.string().min(2).max(1024).required(),bizAddress:q.a.string().min(2).max(400).required(),bizPhone:q.a.string().min(9).max(10).required().regex(/^0[2-9]\d{7,8}$/),bizImage:q.a.string().min(11).max(1024).uri().allow("")},e.doSubmit=Object(f.a)(p.a.mark((function t(){var a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.state.data,t.next=3,I.editCard(a);case 3:N.b.success("Card updated",{position:"top-center",autoClose:2500}),e.props.history.replace("/my-cards");case 5:case"end":return t.stop()}}),t)}))),e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=Object(f.a)(p.a.mark((function e(){var t,a,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match.params.id,e.next=3,I.getCard(t);case 3:a=e.sent,r=a.data,this.setState({data:this.mapToViewModel(r)});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"mapToViewModel",value:function(e){return{_id:e._id,bizName:e.bizName,bizDescription:e.bizDescription,bizAddress:e.bizAddress,bizPhone:e.bizPhone,bizImage:e.bizImage}}},{key:"render",value:function(){return Object(r.jsxs)("div",{className:"container",children:[Object(r.jsx)(O,{titleText:"Card edit Form"}),Object(r.jsx)("div",{className:"row",children:Object(r.jsx)("div",{className:"col-12",children:Object(r.jsx)("p",{children:"Please update your business card details"})})}),Object(r.jsx)("div",{className:"row",children:Object(r.jsx)("div",{className:"col-lg-6",children:Object(r.jsxs)("form",{onSubmit:this.handleSubmit,autoComplete:"off",method:"POST",children:[this.renderInput("bizName","Business name"),this.renderInput("bizDescription","Business description"),this.renderInput("bizAddress","Business address"),this.renderInput("bizPhone","Business phone number"),this.renderInput("bizImage","Business image"),this.renderButton("Update Card"),Object(r.jsx)(b.b,{className:"btn btn-primary btn-custom ml-2",to:"/my-cards",children:"Cancel"})]})})})]})}}]),a}(J),K=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={data:{email:"",password:""},errors:{}},e.schema={email:q.a.string().required().email().label("Email"),password:q.a.string().required().min(6).label("Password")},e.doSubmit=Object(f.a)(p.a.mark((function t(){var a,r,n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.state.data,r=a.email,n=a.password,t.prev=1,t.next=4,z.login(r,n);case 4:window.location="/",t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),t.t0.response&&400===t.t0.response.status&&e.setState({errors:{email:t.t0.response.data,password:t.t0.response.data}});case 10:case"end":return t.stop()}}),t,null,[[1,7]])}))),e}return Object(l.a)(a,[{key:"render",value:function(){return z.getCurrentUser()?Object(r.jsx)(Y.a,{to:"/"}):Object(r.jsxs)("div",{className:"container",children:[Object(r.jsx)(O,{titleText:"Sign In Page"}),Object(r.jsx)("div",{className:"row",children:Object(r.jsx)("div",{className:"col-12",children:Object(r.jsx)("p",{children:"Sign in to your account"})})}),Object(r.jsx)("div",{className:"row",children:Object(r.jsx)("div",{className:"col-lg-6",children:Object(r.jsxs)("form",{onSubmit:this.handleSubmit,autoComplete:"off",method:"POST",children:[this.renderInput("email","Email","email"),this.renderInput("password","Password","password"),this.renderButton("Signin")]})})}),Object(r.jsx)("div",{className:"mt-3 test",children:Object(r.jsx)(b.b,{to:"/signup",className:"link",children:"Don't have an account? Sign up for free!"})})]})}}]),a}(J),Q=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){z.logout(),window.location="/signin"}},{key:"render",value:function(){return null}}]),a}(n.Component),W=(a(76),function(e){e.path;var t=e.component,a=e.render,n=Object(U.a)(e,["path","component","render"]),s=z.getCurrentUser();return Object(r.jsx)(Y.b,Object(T.a)(Object(T.a)({},n),{},{render:function(e){return!s||n.biz&&!s.biz?Object(r.jsx)(Y.a,{to:{pathname:"/signin",state:{from:e.location}}}):t?Object(r.jsx)(t,Object(T.a)({},e)):a(e)}}))}),X=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={},e}return Object(l.a)(a,[{key:"callapi",value:function(){fetch("/api").then((function(e){return e.json()})).then((function(e){console.log(JSON.stringify(e))}))}},{key:"componentDidMount",value:function(){var e=z.getCurrentUser();this.setState({user:e})}},{key:"render",value:function(){var e=this.state.user;return Object(r.jsxs)(s.a.Fragment,{children:[Object(r.jsxs)("header",{children:[Object(r.jsx)(N.a,{}),Object(r.jsx)(j,{user:e})]}),Object(r.jsx)("main",{className:"minh-650 main-font",children:Object(r.jsxs)(Y.d,{children:[Object(r.jsx)(Y.b,{path:"/",exact:!0,component:P}),Object(r.jsx)(Y.b,{path:"/signup",component:R}),Object(r.jsx)(Y.b,{path:"/signIn",component:K}),Object(r.jsx)(Y.b,{path:"/logout",component:Q}),Object(r.jsx)(Y.b,{path:"/biz-signup",component:V}),Object(r.jsx)(W,{path:"/favorites",component:F}),Object(r.jsx)(W,{path:"/create-card",component:$,biz:!0}),Object(r.jsx)(W,{path:"/my-cards/edit/:id",component:G,biz:!0}),Object(r.jsx)(W,{path:"/my-cards",component:H,biz:!0})]})}),Object(r.jsx)("footer",{children:Object(r.jsx)(m,{})})]})}}]),a}(n.Component),Z=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,85)).then((function(t){var a=t.getCLS,r=t.getFID,n=t.getFCP,s=t.getLCP,c=t.getTTFB;a(e),r(e),n(e),s(e),c(e)}))};a(77),a(78),a(43),a(79);i.a.render(Object(r.jsx)(s.a.StrictMode,{children:Object(r.jsx)(b.a,{children:Object(r.jsx)(X,{})})}),document.getElementById("root")),Z()}},[[81,1,2]]]);
//# sourceMappingURL=main.40212772.chunk.js.map